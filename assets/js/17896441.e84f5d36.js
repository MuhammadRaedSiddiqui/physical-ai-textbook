"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[401],{9429:(n,e,o)=>{o.d(e,{A:()=>c});var r=o(6540),t=o(3399),a=o(4848);const s="https://physical-ai-textbook.onrender.com",i=new Map;function l({title:n,description:e}){const[o,t]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,p]=(0,r.useState)(null),[b,x]=(0,r.useState)("original"),[g,f]=(0,r.useState)(""),[h,u]=(0,r.useState)(""),[m,y]=(0,r.useState)(!1),N=()=>{i.forEach((n,e)=>{e.innerHTML=n,e.style.direction="",e.style.textAlign=""}),x("original"),y(!1)};return(0,a.jsxs)("div",{className:"chapter-tools-wrapper",children:[(0,a.jsxs)("div",{className:"chapter-tools-container",children:[(0,a.jsxs)("div",{className:"tools-header",children:[(0,a.jsx)("span",{className:"tools-icon",children:"\u25c8"}),(0,a.jsx)("span",{className:"tools-label",children:"CONTENT_TOOLS"}),"original"!==b&&(0,a.jsx)("span",{className:"mode-badge",children:"translated"===b?"\ud83c\udf10 URDU":"\u25c7 PERSONALIZED"}),(0,a.jsx)("span",{className:"tools-status"})]}),(0,a.jsxs)("div",{className:"tools-buttons",children:["original"!==b&&(0,a.jsxs)("button",{onClick:()=>{const n=document.querySelector(".markdown")||document.querySelector("article");if(n){const e=n.querySelector(".personalized-overlay");e&&(e.remove(),Array.from(n.children).forEach(n=>{const e=n;e.style.display=e.dataset.originalDisplay||""}))}N()},className:"tool-btn original-btn",children:[(0,a.jsx)("span",{className:"btn-icon",children:"\u21a9"}),"ORIGINAL"]}),(0,a.jsx)("button",{onClick:()=>{"personalized"!==b?(y(!0),p(null)):N()},disabled:l||o,className:"tool-btn personalize-btn "+("personalized"===b?"active":""),children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"btn-icon spinning",children:"\u27f3"})," PROCESSING..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"btn-icon",children:"\u25c7"})," PERSONALIZE"]})}),(0,a.jsx)("button",{onClick:async()=>{if("translated"!==b){"personalized"===b&&N(),p(null),t(!0),f("Finding content..."),y(!1);try{const n=(()=>{const n=document.querySelector(".markdown")||document.querySelector("article");if(!n)return[];const e=[];return n.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, td, th, blockquote, figcaption").forEach(n=>{if(n.closest("pre")||n.closest("code"))return;const o=n.textContent?.trim();!o||o.length<3||e.push(n)}),e})();if(0===n.length)throw new Error("No content found to translate");const e=n.map(n=>(n=>{const e=new Map;let o=n.innerHTML;n.querySelectorAll("code").forEach((n,r)=>{const t=`[[CODE${r}]]`;e.set(t,n.outerHTML),o=o.replace(n.outerHTML,t)});const r=document.createElement("div");return r.innerHTML=o,{text:r.textContent||"",codeMap:e}})(n)),o=e.map(n=>n.text);f(`Translating ${o.length} sections...`);const r=await fetch(`${s}/translate/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({texts:o,target_language:"Urdu"})});if(!r.ok)throw new Error("Translation failed");const t=await r.json();f("Applying translations..."),n.forEach((n,o)=>{t.translations[o]&&((n,e,o,r)=>{i.has(n)||i.set(n,n.innerHTML);let t=e;o.forEach((n,e)=>{t=t.replace(e,n)}),n.innerHTML=t,r&&(n.style.direction="rtl",n.style.textAlign="right")})(n,t.translations[o],e[o].codeMap,!0)}),x("translated")}catch(n){console.error("Translation error:",n),p("Translation failed. Please try again."),N()}finally{t(!1),f("")}}else N()},disabled:o||l,className:"tool-btn translate-btn "+("translated"===b?"active":""),children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"btn-icon spinning",children:"\u27f3"})," TRANSLATING..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"btn-icon",children:"\u0627\u0631\u062f\u0648"})," TRANSLATE"]})})]}),g&&(0,a.jsxs)("div",{className:"progress-bar",children:[(0,a.jsx)("span",{className:"progress-icon spinning",children:"\u27f3"}),g]}),m&&(0,a.jsxs)("div",{className:"context-input-container",children:[(0,a.jsx)("label",{className:"context-label",children:"// ENTER YOUR BACKGROUND"}),(0,a.jsx)("textarea",{value:h,onChange:n=>u(n.target.value),placeholder:"e.g., Python developer with 3 years experience, new to robotics...",className:"context-textarea",rows:2}),(0,a.jsxs)("div",{className:"context-actions",children:[(0,a.jsx)("button",{onClick:async()=>{if(h.trim()){"translated"===b&&N(),p(null),c(!0),f("Personalizing content..."),y(!1);try{const n=document.querySelector(".markdown")||document.querySelector("article");if(!n)throw new Error("Content not found");i.has(n)||i.set(n,n.innerHTML);const e=n.textContent||"",o=await fetch(`${s}/personalize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e.substring(0,8e3),user_context:h})});if(!o.ok)throw new Error("Personalization failed");const r=await o.json(),t=document.createElement("div");t.className="personalized-overlay",t.innerHTML=`\n        <div class="personalized-header">\n          <span>\u25c8 PERSONALIZED FOR: ${h.substring(0,50)}${h.length>50?"...":""}</span>\n        </div>\n        <div class="personalized-body">${r.personalized.replace(/\n/g,"<br>")}</div>\n      `,Array.from(n.children).forEach(n=>{n.dataset.originalDisplay=n.style.display,n.style.display="none"}),n.insertBefore(t,n.firstChild),x("personalized")}catch(n){console.error("Personalization error:",n),p("Personalization failed. Please try again.")}finally{c(!1),f("")}}else p("Please enter your background.")},disabled:l||!h.trim(),className:"submit-btn",children:"GENERATE"}),(0,a.jsx)("button",{onClick:()=>y(!1),className:"cancel-btn",children:"CANCEL"})]})]}),d&&(0,a.jsxs)("div",{className:"error-display",children:[(0,a.jsx)("span",{className:"error-icon",children:"\u2715"}),(0,a.jsx)("span",{className:"error-text",children:d}),(0,a.jsx)("button",{onClick:()=>p(null),className:"error-close",children:"DISMISS"})]})]}),(0,a.jsx)("style",{children:"\n        .chapter-tools-wrapper {\n          margin-bottom: 24px;\n          font-family: 'Rajdhani', 'Segoe UI', sans-serif;\n        }\n        .chapter-tools-container {\n          background: rgba(5, 5, 5, 0.95);\n          border: 1px solid rgba(0, 243, 255, 0.3);\n          border-radius: 8px;\n          overflow: hidden;\n          box-shadow: 0 0 20px rgba(0, 243, 255, 0.1);\n        }\n        .tools-header {\n          background: linear-gradient(180deg, rgba(0, 243, 255, 0.1) 0%, rgba(0, 243, 255, 0.02) 100%);\n          padding: 10px 16px;\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          border-bottom: 1px solid rgba(0, 243, 255, 0.2);\n        }\n        .tools-icon { color: #00f3ff; font-size: 14px; }\n        .tools-label {\n          color: #00f3ff;\n          font-family: 'Orbitron', monospace;\n          font-size: 11px;\n          letter-spacing: 1px;\n          font-weight: bold;\n        }\n        .mode-badge {\n          background: rgba(0, 255, 136, 0.2);\n          color: #00ff88;\n          padding: 2px 8px;\n          border-radius: 4px;\n          font-size: 10px;\n          letter-spacing: 1px;\n        }\n        .tools-status {\n          width: 6px; height: 6px;\n          background: #00ff88;\n          border-radius: 50%;\n          box-shadow: 0 0 8px #00ff88;\n          margin-left: auto;\n        }\n        .tools-buttons {\n          padding: 12px 16px;\n          display: flex;\n          gap: 10px;\n          flex-wrap: wrap;\n        }\n        .tool-btn {\n          background: rgba(0, 243, 255, 0.05);\n          border: 1px solid rgba(0, 243, 255, 0.3);\n          color: #00f3ff;\n          padding: 8px 16px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-family: inherit;\n          font-size: 11px;\n          font-weight: bold;\n          text-transform: uppercase;\n          letter-spacing: 1px;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .tool-btn:hover:not(:disabled) {\n          background: rgba(0, 243, 255, 0.15);\n          border-color: #00f3ff;\n          box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);\n        }\n        .tool-btn:disabled { opacity: 0.5; cursor: not-allowed; }\n        .tool-btn.active {\n          background: rgba(0, 243, 255, 0.2);\n          border-color: #00f3ff;\n          box-shadow: 0 0 12px rgba(0, 243, 255, 0.4);\n        }\n        .original-btn {\n          background: rgba(255, 255, 255, 0.05);\n          border-color: rgba(255, 255, 255, 0.3);\n          color: #aaa;\n        }\n        .original-btn:hover { border-color: #fff; color: #fff; }\n        .btn-icon { font-size: 12px; }\n        .spinning { animation: spin 1s linear infinite; }\n        @keyframes spin { to { transform: rotate(360deg); } }\n        .progress-bar {\n          padding: 10px 16px;\n          background: rgba(0, 243, 255, 0.05);\n          border-top: 1px solid rgba(0, 243, 255, 0.1);\n          color: #00f3ff;\n          font-size: 12px;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        .progress-icon { font-size: 14px; }\n        .context-input-container {\n          padding: 16px;\n          border-top: 1px solid rgba(0, 243, 255, 0.2);\n          background: rgba(0, 243, 255, 0.02);\n        }\n        .context-label {\n          display: block;\n          color: #00ff88;\n          font-family: monospace;\n          font-size: 11px;\n          letter-spacing: 1px;\n          margin-bottom: 8px;\n        }\n        .context-textarea {\n          width: 100%;\n          background: rgba(0, 0, 0, 0.5);\n          border: 1px solid rgba(0, 243, 255, 0.3);\n          border-radius: 4px;\n          color: #e0e0e0;\n          padding: 10px;\n          font-family: inherit;\n          font-size: 13px;\n          resize: none;\n        }\n        .context-textarea:focus {\n          outline: none;\n          border-color: #00f3ff;\n        }\n        .context-actions {\n          display: flex;\n          gap: 10px;\n          margin-top: 10px;\n        }\n        .submit-btn {\n          background: rgba(0, 255, 136, 0.1);\n          border: 1px solid rgba(0, 255, 136, 0.5);\n          color: #00ff88;\n          padding: 6px 16px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-family: inherit;\n          font-size: 11px;\n          font-weight: bold;\n        }\n        .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; }\n        .cancel-btn {\n          background: none;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          color: #808080;\n          padding: 6px 16px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-family: inherit;\n          font-size: 11px;\n        }\n        .error-display {\n          padding: 10px 16px;\n          background: rgba(255, 68, 68, 0.1);\n          border-top: 1px solid rgba(255, 68, 68, 0.3);\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          color: #ff4444;\n          font-size: 12px;\n        }\n        .error-close {\n          margin-left: auto;\n          background: none;\n          border: 1px solid rgba(255, 68, 68, 0.3);\n          color: #ff4444;\n          padding: 2px 8px;\n          font-size: 10px;\n          cursor: pointer;\n          border-radius: 2px;\n        }\n        /* Personalized overlay styles */\n        .personalized-overlay {\n          background: rgba(0, 20, 30, 0.95);\n          border: 1px solid rgba(0, 255, 136, 0.3);\n          border-radius: 8px;\n          margin-bottom: 20px;\n          overflow: hidden;\n        }\n        .personalized-header {\n          background: rgba(0, 255, 136, 0.1);\n          padding: 10px 16px;\n          color: #00ff88;\n          font-size: 11px;\n          font-family: monospace;\n          letter-spacing: 1px;\n          border-bottom: 1px solid rgba(0, 255, 136, 0.2);\n        }\n        .personalized-body {\n          padding: 20px;\n          color: #e0e0e0;\n          font-size: 15px;\n          line-height: 1.8;\n        }\n        [data-theme='light'] .chapter-tools-container {\n          background: rgba(20, 25, 35, 0.98);\n        }\n      "})]})}function c(n){const e="undefined"!=typeof document&&document.querySelector("h1")?.textContent||"Chapter Content";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{title:e}),(0,a.jsx)(t.A,{...n})]})}}}]);